<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NETLII | Movies & TV</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800;900&display=swap" rel="stylesheet">
    
    <style>
      :root {
        /* Exact color variables from your index.html */
        --glass: rgba(255, 255, 255, 0.5);
        --border: rgba(255, 255, 255, 0.3);
        --accent: #000;
        --radius: 25px; /* Matches your tab-frame radius */
      }

      * { margin: 0; padding: 0; box-sizing: border-box; }

      body {
        margin: 0;
        font-family: 'Nunito', sans-serif;
        /* Fallback color if the image is not found */
        background: #f0f0f0; 
        background-image: url('netlii-bg.avif'); 
        background-repeat: no-repeat;
        background-position: center center;
        background-attachment: fixed;
        background-size: cover;
        min-height: 100vh;
        color: var(--accent);
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .container { width: 100%; max-width: 1400px; padding: 40px 20px; }

      .header { text-align: center; margin-bottom: 50px; }
      
      .header h1 {
        font-size: 3.5rem;
        letter-spacing: 12px;
        font-weight: 900;
        text-transform: uppercase;
        margin-bottom: 30px;
      }

      /* Pill-style search bar */
      .search-container { max-width: 600px; margin: 0 auto 30px; }
      
      .search-input {
        width: 100%;
        height: 54px;
        border-radius: 50px;
        border: 2px solid var(--accent);
        padding: 0 25px;
        background: rgba(255, 255, 255, 0.9);
        font-size: 1rem;
        font-weight: 700;
        outline: none;
        transition: 0.3s;
      }

      .filter-buttons { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-bottom: 40px; }
      
      .filter-btn {
        padding: 12px 25px;
        border-radius: 50px;
        border: 2px solid var(--accent);
        background: white;
        font-weight: 800;
        cursor: pointer;
        transition: 0.2s;
        text-transform: uppercase;
      }

      .filter-btn.active, .filter-btn:hover { background: var(--accent); color: white; }

      /* Grid and Glassmorphism Cards */
      .movies-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 30px;
      }

      .movie-card {
        background: var(--glass);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border: 2px solid var(--accent);
        border-radius: var(--radius);
        overflow: hidden;
        transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        cursor: pointer;
      }

      .movie-card:hover { transform: translateY(-10px); background: rgba(255, 255, 255, 0.8); }

      .movie-poster { width: 100%; aspect-ratio: 2/3; object-fit: cover; border-bottom: 2px solid var(--accent); }

      .movie-info { padding: 20px; text-align: center; }
      .movie-title { font-size: 1.1rem; font-weight: 900; margin-bottom: 5px; }

      /* PLAYER & SHIELD UI */
      .player-container {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.98);
        z-index: 9999;
        display: none;
        flex-direction: column;
      }
      
      .player-container.show { display: flex; }

      .player-header {
        padding: 15px 30px;
        background: #fff;
        border-bottom: 2px solid var(--accent);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .shield-tag {
        background: #000;
        color: #fff;
        padding: 6px 15px;
        border-radius: 50px;
        font-size: 0.7rem;
        font-weight: 900;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .close-btn {
        background: var(--accent);
        color: #fff;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.2rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .player-wrapper { flex: 1; padding: 20px; display: flex; justify-content: center; align-items: center; background: #000; }
      
      iframe { 
        width: 100%; 
        max-width: 1200px; 
        height: 100%; 
        border: 3px solid #fff; 
        border-radius: 20px; 
      }

      #pagination button {
        padding: 12px 25px;
        border-radius: 50px;
        border: 2px solid var(--accent);
        background: #fff;
        font-weight: 900;
        cursor: pointer;
        margin: 0 10px;
      }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>NETLII</h1>
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="Search movies and TV shows...">
        </div>
        <div class="filter-buttons" id="filterContainer">
            <button class="filter-btn active" data-filter="popular">Popular</button>
            <button class="filter-btn" data-filter="trending">Trending</button>
            <button class="filter-btn" data-filter="top_rated">Top Rated</button>
            <button class="filter-btn" data-filter="now_playing">Cinema</button>
        </div>
    </div>
    
    <div id="moviesGrid" class="movies-grid"></div>
    <div id="pagination" style="text-align:center; padding: 40px 0;"></div>
</div>

<div class="player-container" id="playerContainer">
    <div class="player-header">
        <div class="shield-tag">üõ°Ô∏è SHIELD ACTIVE</div>
        <div id="playerTitle" style="font-weight:900; font-size: 1.2rem;">Movie Title</div>
        <button class="close-btn" id="closeBtn">‚úï</button>
    </div>
    <div class="player-wrapper">
        <iframe id="playerIframe" allowfullscreen sandbox="allow-forms allow-scripts allow-same-origin"></iframe>
    </div>
</div>

<script>
    const k="2713804610e1e236b1cf44bfac3a7776", b="https://api.themoviedb.org/3", img="https://image.tmdb.org/t/p/w500";
    let p=1, f="popular", searchTimeout = null;

    // --- AD BLOCKER ENGINE ---
    // This kills any attempts to open new windows or popups
    window.open = function() {
        console.warn("NETLII Shield: Blocked an ad popup.");
        return null;
    };

    async function load() {
        const url = `${b}/movie/${f}?api_key=${k}&page=${p}`;
        try {
            const res = await fetch(url);
            const data = await res.json();
            render(data.results, data.total_pages);
        } catch (e) { console.error("API Error", e); }
    }

    async function search(query) {
        const url = `${b}/search/multi?api_key=${k}&query=${encodeURIComponent(query)}&page=${p}`;
        const res = await fetch(url);
        const data = await res.json();
        render(data.results, data.total_pages);
    }

    function render(movies, tp) {
        const grid = document.getElementById('moviesGrid');
        grid.innerHTML = '';
        movies.forEach(m => {
            if(!m.poster_path) return;
            const el = document.createElement('div');
            el.className = 'movie-card';
            el.innerHTML = `
                <img class="movie-poster" src="${img + m.poster_path}">
                <div class="movie-info">
                    <div class="movie-title">${m.title || m.name}</div>
                    <div style="font-weight:700; opacity:0.6; font-size:0.8rem">
                        ‚≠ê ${m.vote_average ? m.vote_average.toFixed(1) : '‚Äî'}
                    </div>
                </div>
            `;
            el.onclick = () => {
                document.getElementById('playerTitle').textContent = m.title || m.name;
                document.getElementById('playerIframe').src = `https://multiembed.mov/?tmdb=1&video_id=${m.id}`;
                document.getElementById('playerContainer').classList.add('show');
            };
            grid.appendChild(el);
        });
        updatePagination(tp);
    }

    function updatePagination(tp) {
        const container = document.getElementById('pagination');
        container.innerHTML = `
            <button ${p===1 ? 'disabled' : ''} id="prev">PREV</button>
            <span style="font-weight:900; margin: 0 15px;">${p} / ${tp}</span>
            <button ${p===tp ? 'disabled' : ''} id="next">NEXT</button>
        `;
        document.getElementById('prev')?.addEventListener('click', () => { p--; load(); window.scrollTo(0,0); });
        document.getElementById('next')?.addEventListener('click', () => { p++; load(); window.scrollTo(0,0); });
    }

    document.getElementById('closeBtn').onclick = () => {
        document.getElementById('playerContainer').classList.remove('show');
        document.getElementById('playerIframe').src = '';
    };

    document.getElementById('searchInput').oninput = (e) => {
        clearTimeout(searchTimeout);
        const val = e.target.value.trim();
        searchTimeout = setTimeout(() => {
            p = 1;
            val ? search(val) : load();
        }, 600);
    };

    document.getElementById('filterContainer').onclick = (e) => {
        if(e.target.classList.contains('filter-btn')) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            e.target.classList.add('active');
            f = e.target.dataset.filter;
            p = 1;
            load();
        }
    };

    load();
</script>
</body>
</html>
